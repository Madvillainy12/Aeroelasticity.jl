<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guide · Aeroelasticity.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Aeroelasticity.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Guide</a><ul class="internal"><li><a class="tocitem" href="#Implementation"><span>Implementation</span></a></li><li><a class="tocitem" href="#Analyses"><span>Analyses</span></a></li><li><a class="tocitem" href="#Aeroelasticity"><span>Aeroelasticity</span></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/section-stability/">Aeroelastic Analysis of a Typical Section</a></li><li><a class="tocitem" href="../examples/section-simulation/">Time Domain Simulation of a Typical Section</a></li><li><a class="tocitem" href="../examples/goland-stability/">Aeroelastic Analysis of the Goland Wing</a></li><li><a class="tocitem" href="../examples/cantilever-steady/">Steady State Aeroelastic Analysis of a Highly Flexible Wing</a></li><li><a class="tocitem" href="../examples/cantilever-stability/">Aeroelastic Stability Analysis of a Highly Flexible Wing</a></li></ul></li><li><span class="tocitem">Model Documentation</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Aerodynamic Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../models/aerodynamics/steady/">Steady Thin Airfoil Theory</a></li><li><a class="tocitem" href="../models/aerodynamics/quasisteady/">Quasi-Steady Thin Airfoil Theory</a></li><li><a class="tocitem" href="../models/aerodynamics/wagner/">Wagner&#39;s Function</a></li><li><a class="tocitem" href="../models/aerodynamics/peters/">Peters&#39; Finite State</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Structural Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../models/structures/section/">Typical Section</a></li><li><a class="tocitem" href="../models/structures/rigidbody/">Rigid Body</a></li><li><a class="tocitem" href="../models/structures/gxbeam/">Geometrically Exact Beam Theory</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Coupled Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../models/couplings/steady-section/">Steady Thin Airfoil Theory + Typical Section</a></li><li><a class="tocitem" href="../models/couplings/quasisteady-section/">Quasi-Steady Thin Airfoil Theory + Typical Section</a></li><li><a class="tocitem" href="../models/couplings/wagner-section/">Wagner&#39;s Function + Typical Section</a></li><li><a class="tocitem" href="../models/couplings/peters-section/">Peters&#39; Finite State + Typical Section</a></li><li><a class="tocitem" href="../models/couplings/liftingline-rigidbody/">Lifting Line + Rigid Body</a></li><li><a class="tocitem" href="../models/couplings/liftingline-gxbeam/">Lifting Line + Geometrically Exact Beam Theory</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/main/docs/src/guide.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="guide"><a class="docs-heading-anchor" href="#guide">Getting Started</a><a id="guide-1"></a><a class="docs-heading-anchor-permalink" href="#guide" title="Permalink"></a></h1><p>The governing equations for many unsteady systems may be described by the first-order implicit differential equation</p><p class="math-container">\[   0 = \bm{f}(\bm{\dot{x}}, \bm{x}, \bm{y}, \bm{p}, t)\]</p><p>where <span>$\bm{f}$</span> is a vector-valued residual function, <span>$\dot{()}$</span> denotes the time derivative, <span>$\bm{x}$</span> is a vector of state variables, <span>$\bm{y}$</span> is a vector of time-varying inputs, <span>$\bm{p}$</span> is a vector of time-invariant parameters, and <span>$t$</span> is the current time. If we concatenate the governing equations associated with any number of unsteady models described by this equation together, we obtain the concatenated model</p><p class="math-container">\[\bm{0} = \bm{\mathcal{F}}(\bm{\dot{X}}, \bm{X}, \bm{Y}, \bm{P}, t)\]</p><p>where</p><p class="math-container">\[\bm{\mathcal{F}} = \begin{bmatrix}
\bm{f_1} \\
\bm{f_2} \\
\vdots \\
\bm{f_n}
\end{bmatrix} \quad
\bm{X} = \begin{bmatrix}
\bm{x_1} \\
\bm{x_2} \\
\vdots \\
\bm{x_n}
\end{bmatrix} \quad
\bm{Y} = \begin{bmatrix}
\bm{y_1} \\
\bm{y_2} \\
\vdots \\
\bm{y_n}
\end{bmatrix} \quad
\bm{P} = \begin{bmatrix}
\bm{p_1} \\
\bm{p_2} \\
\vdots \\
\bm{p_n}
\end{bmatrix}\]</p><p>The concatenated model is a decoupled model, since the states, inputs, and parameters of each submodel are not influenced in any way by the states, inputs, and parameters of the other submodels. To couple these models, we introduce the following coupling function, which defines the inputs of the concatenated model as functions of its rates, states, and parameters, as well as the current time.</p><p class="math-container">\[\bm{y} = \bm{\mathcal{G}}(\bm{\dot{X}}, \bm{X}, \bm{P}, t)\]</p><p>Defining this coupling function allows us to define the governing equations for a general monolithic coupled model.</p><p class="math-container">\[\bm{\tilde{\mathcal{F}}}(\bm{\dot{X}}, \bm{X}, \bm{P}, t) = \bm{\mathcal{F}}(\bm{\dot{X}}, \bm{X}, \bm{\mathcal{G}}(\bm{\dot{X}}, \bm{X}, \bm{P}, t), \bm{P}, t) = \bm{0}\]</p><h2 id="Implementation"><a class="docs-heading-anchor" href="#Implementation">Implementation</a><a id="Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation" title="Permalink"></a></h2><p>Our coupling methodology is implemented by the following <code>CoupledModel</code> constructor.</p><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.CoupledModel-Tuple{Any, Any}" href="#Aeroelasticity.CoupledModel-Tuple{Any, Any}"><code>Aeroelasticity.CoupledModel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">CoupledModel(submodels, parameters, nstate=number_of_states.(submodels); kwargs...)</code></pre><p>Define a coupled model from a collection of submodels.  Each submodel is defined as an in-place implicit differential equation (i.e. <code>submodels[i](residᵢ, dxᵢ, xᵢ, yᵢ, pᵢ, t)</code>).</p><p><strong>General Keyword Arguments</strong></p><ul><li><code>finput = default_coupling(submodels...)</code>: Coupling function for the combined system.  Has the function signature: <code>y₁, y₂, ... yₙ = finput(dxᵢ, xᵢ, pᵢ, t)</code>.  Default coupling  functions are defined for various combinations of built-in models.</li><li><code>fparam = default_parameter_function(finput)</code>: Parameter function for the coupled system.  Has the function signature: <code>p₁, p₂, ... pₙ, pₐ = fparam(p, t)</code></li></ul><p><strong>Keyword Arguments for Automatically Determining Jacobian Sparsity</strong></p><ul><li><code>neval=3</code>: Total number of evaluation points (for computing jacobian properties)</li><li><code>dx0=[rand(sum(nstate) for ieval = 1:neval]</code>: Evaluation point rates</li><li><code>x0=[rand(sum(nstate) for ieval = 1:neval]</code>: Evaluation point states</li><li><code>p0=fill(default_parameters(finput), neval)</code>: Evaluation point parameters</li><li><code>t0=[rand() for ieval=1:neval]</code>: Evaluation point times</li><li><code>symbolic=true</code>: Symbolically find jacobian sparsity?</li><li><code>autodiff=true</code>: Use automatic differentiation to evaluate jacobians?</li><li><code>fdtype=Val(:forward)</code>: Finite differencing type to use if <code>autodiff=false</code></li><li><code>ztol=nothing</code>: Tolerance for determining jacobian sparsity (the default includes structural zeros)</li><li><code>atol=0.0</code>: Absolute tolerance for determining rate jacobian properties (see <code>isapprox</code>)</li><li><code>rtol=0.0</code>: Relative tolerance for determining rate jacobian properties (see <code>isapprox</code>)</li></ul><p><strong>Keyword Arguments for Providing Jacobian Sparsity (and other properties)</strong></p><ul><li><code>rate_jacobian_sparsity=nothing</code>: Coupled system rate jacobian sparsity</li><li><code>state_jacobian_sparsity=nothing</code>: Coupled system state jacobian sparsity</li><li><code>rate_jacobian_colorvec=nothing</code>: Coupled system rate jacobian color vector</li><li><code>state_jacobian_colorvec=nothing</code>: Coupled system state jacobian color vector</li><li><code>identity_mass_matrix=nothing</code>: Indicates whether the mass matrix is the identity matrix</li><li><code>constant_mass_matrix=nothing</code>: Indicates whether the mass matrix does not change.  Note  that when <code>neval=1</code> this property defaults to <code>false</code> unless <code>identity_mass_matrix==true</code></li><li><code>mass_matrix=spzeros(sum(nstate),sum(nstate))</code>: Storage for the mass matrix.  Note that  this matrix is only used if <code>constant_mass_matrix=true</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/models.jl#L20-L56">source</a></section></article><p>In addition to constructing a coupled model, this constructor automatically detects the sparsity of the resulting rate and state jacobian matrices.  This information is then used when evaluating the following jacobian evaluation functions.</p><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.rate_jacobian!" href="#Aeroelasticity.rate_jacobian!"><code>Aeroelasticity.rate_jacobian!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rate_jacobian!(jacob, coupled_model, dx, x, p, t; kwargs...)</code></pre><p>Compute the jacobian of the residual with respect to the state rates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/models.jl#L286-L290">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.state_jacobian!" href="#Aeroelasticity.state_jacobian!"><code>Aeroelasticity.state_jacobian!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">state_jacobian!(jacob, coupled_model, dx, x, p, t; kwargs...)</code></pre><p>Compute the jacobian of the residual with respect to the state rates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/models.jl#L319-L323">source</a></section></article><p>The residual may be evaluated using the following function</p><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.residual!" href="#Aeroelasticity.residual!"><code>Aeroelasticity.residual!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">residual!(resid, coupled_model, dx, x, p, t)</code></pre><p>Compute the residual for a coupled model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/models.jl#L262-L266">source</a></section></article><p>Alternatively, the residual may be evaluated by calling the coupled model as a function.</p><pre><code class="language- hljs">(coupled_model::CoupledModel)(resid, dx, x, p, t)</code></pre><h2 id="Analyses"><a class="docs-heading-anchor" href="#Analyses">Analyses</a><a id="Analyses-1"></a><a class="docs-heading-anchor-permalink" href="#Analyses" title="Permalink"></a></h2><p>Once a coupled model has been constructed, the system may be linearized using the <a href="#Aeroelasticity.linearize"><code>linearize</code></a> function.</p><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.linearize" href="#Aeroelasticity.linearize"><code>Aeroelasticity.linearize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">linearize(model, x, p; autodiff=true, fdtype=Val(:forward))
linearize(model, dx, x, p, t; autodiff=true, fdtype=Val(:forward))</code></pre><p>Calculate the jacobian of the residual function for coupled model <code>model</code> with respect to the state variables and their rates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/interface.jl#L1-L7">source</a></section></article><p>Eigenvalues and eigenvectors may then be computed using the <code>dense_eigen</code> or <code>sparse_eigen</code> functions.</p><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.dense_eigen" href="#Aeroelasticity.dense_eigen"><code>Aeroelasticity.dense_eigen</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dense_eigen(K, M; kwargs...)</code></pre><p>Return the eigenvalues, left eigenvector matrix, and right eigenvector matrix corresponding to the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/interface.jl#L20-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.sparse_eigen" href="#Aeroelasticity.sparse_eigen"><code>Aeroelasticity.sparse_eigen</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">sparse_eigen(K, M; nev=min(20, size(K,1)))</code></pre><p>Return the eigenvalues, left eigenvector matrix, and right eigenvector matrix corresponding to the model. <code>nev</code> is the number of eigenvalues to compute</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/interface.jl#L36-L41">source</a></section></article><p>Correlating eigenmodes with modes from previous iterations may be done using the <code>correlate_eigenmodes</code> function</p><article class="docstring"><header><a class="docstring-binding" id="Aeroelasticity.correlate_eigenmodes" href="#Aeroelasticity.correlate_eigenmodes"><code>Aeroelasticity.correlate_eigenmodes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">correlate_eigenmodes(U, M, V; tracked_modes=1:size(U,1), rtol=1e-3, atol=1e-3)</code></pre><p>Correlate modes from a current iteration with those from a previous iteration. Returns a permutation that may be used to reorder the new modes and the associated corruption indices.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/interface.jl#L84-L89">source</a></section></article><p><a href="https://github.com/SciML/DifferentialEquations.jl"><code>DifferentialEquations</code></a> may be used to  find a steady state or time marching solution.  To facilitate these analyses, this package  provides the following specialized constructors for <code>ODEFunction</code> and <code>DAEFunction</code>.</p><article class="docstring"><header><a class="docstring-binding" id="SciMLBase.ODEFunction-Tuple{CoupledModel, Any}" href="#SciMLBase.ODEFunction-Tuple{CoupledModel, Any}"><code>SciMLBase.ODEFunction</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ODEFunction(model::Aeroelasticity.CoupledModel, p0)</code></pre><p>Construct an <code>ODEFunction</code> for a coupled model.  Note that by using this function you assume that the governing equations may be expressed in the form <code>M(x, p, t)*dx = f(x, p, t)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/interface.jl#L191-L196">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SciMLBase.DAEFunction-Tuple{CoupledModel}" href="#SciMLBase.DAEFunction-Tuple{CoupledModel}"><code>SciMLBase.DAEFunction</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">DAEFunction(model::Aeroelasticity.CoupledModel)</code></pre><p>Construct an <code>DAEFunction</code> for a coupled model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byuflowlab/Aeroelasticity.jl/blob/255c533083ab5b5f002e525b7aa21542806e6189/src/interface.jl#L233-L237">source</a></section></article><h2 id="Aeroelasticity"><a class="docs-heading-anchor" href="#Aeroelasticity">Aeroelasticity</a><a id="Aeroelasticity-1"></a><a class="docs-heading-anchor-permalink" href="#Aeroelasticity" title="Permalink"></a></h2><p>The primary intended purpose of the coupling methodology presented in this package  is to faciltate constructing aeroelastic systems.  To this end, a number of aerodynamic and structural models have been implemented in this package which may be used to construct various aeroelastic models.  Each model is defined as a callable struct, with a calling signature that matches the format expected by the <a href="#Aeroelasticity.CoupledModel-Tuple{Any, Any}"><code>CoupledModel</code></a> constructor. For more details about the theoretical background behind each model, we refer readers to the  relevant pages of the documentation.  For more details about how to use these models to  construct aeroelastic systems, see the examples.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../examples/section-stability/">Aeroelastic Analysis of a Typical Section »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 13 June 2023 05:28">Tuesday 13 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
