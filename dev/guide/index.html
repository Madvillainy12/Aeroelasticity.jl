<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · AerostructuralDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AerostructuralDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Initializing-the-Aeroelastic-Model"><span>Initializing the Aeroelastic Model</span></a></li><li><a class="tocitem" href="#Defining-State-Variables,-Inputs,-and-Parameters"><span>Defining State Variables, Inputs, and Parameters</span></a></li><li><a class="tocitem" href="#Performing-a-Stability-Analysis"><span>Performing a Stability Analysis</span></a></li><li><a class="tocitem" href="#Performing-a-Simulation"><span>Performing a Simulation</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><span class="tocitem">Models</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Aerodynamic Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../aerodynamics/steady/">Steady Thin Airfoil Theory</a></li><li><a class="tocitem" href="../aerodynamics/quasisteady/">Quasi-Steady Thin Airfoil Theory</a></li><li><a class="tocitem" href="../aerodynamics/wagner/">Wagner&#39;s Function</a></li><li><a class="tocitem" href="../aerodynamics/peters/">Peters&#39; Finite State</a></li><li><a class="tocitem" href="../aerodynamics/liftingline/">Lifting Line</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Structural Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../structures/section/">Typical Section</a></li><li><a class="tocitem" href="../structures/rigidbody/">Rigid Body</a></li><li><a class="tocitem" href="../structures/gxbeam/">Geometrically Exact Beam Theory</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Coupled Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../couplings/steady-section/">Steady Thin Airfoil Theory + Typical Section</a></li><li><a class="tocitem" href="../couplings/quasisteady-section/">Quasi-Steady Thin Airfoil Theory + Typical Section</a></li><li><a class="tocitem" href="../couplings/wagner-section/">Wagner&#39;s Function + Typical Section</a></li><li><a class="tocitem" href="../couplings/peters-section/">Peters&#39; Finite State + Typical Section</a></li><li><a class="tocitem" href="../couplings/liftingline-rigidbody/">Lifting Line + Rigid Body</a></li><li><a class="tocitem" href="../couplings/liftingline-gxbeam/">Lifting Line + Geometrically Exact Beam Theory</a></li><li><a class="tocitem" href="../couplings/liftingline-gxbeam-rigidbody/">Lifting Line + Geometrically Exact Beam Theory + Rigid Body</a></li></ul></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../library/public/">Public</a></li><li><a class="tocitem" href="../library/internals/">Internals</a></li></ul></li><li><a class="tocitem" href="../developer/">Developer Guide</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/byuflowlab/AerostructuralDynamics.jl/blob/master/docs/src/guide.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><p>In this guide we introduce you to the basic functionality of this package in a step by step manner.  This is a good starting point for learning about how to use this package.  For more details about how to use a particular model, the model documentation is likely a better resource.  For more examples of how to use this package see the <a href="../examples/#Examples">examples</a>.</p><ul></ul><p>If you haven&#39;t yet, now would be a good time to install AerostructuralDynamics.  AerostructuralDynamics can be installed from the Julia REPL by typing <code>]</code> (to enter the package manager) and then running the following command.</p><pre><code class="language-julia hljs">pkg&gt; add https://flow.byu.edu/AerostructuralDynamics.jl</code></pre><p>Now, that the package is installed we need to load it so that we can use it.</p><pre><code class="language-julia hljs">using AerostructuralDynamics</code></pre><p>For the purposes of this guide, we will be working with a two-degree-of-freedom typical section model, as shown in the following figure.</p><p><img src="../typical-section.svg" alt/></p><p>Our goal is to create an 2D aeroelastic model which we can use to simulate the behavior of this system.</p><h2 id="Initializing-the-Aeroelastic-Model"><a class="docs-heading-anchor" href="#Initializing-the-Aeroelastic-Model">Initializing the Aeroelastic Model</a><a id="Initializing-the-Aeroelastic-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Initializing-the-Aeroelastic-Model" title="Permalink"></a></h2><p>For the aerodynamic model, we will be using Peter&#39;s finite state model with four aerodynamic state variables.  For the structural model, we will be using the typical section model.  To couple these models together, we use the <a href="../couplings/liftingline-gxbeam-rigidbody/#AerostructuralDynamics.couple_models-Tuple{LiftingLine, GEBT, RigidBody}"><code>couple_models</code></a> function.  </p><pre><code class="language-julia hljs">aerodynamic_model = Peters{4}() # we use four aerodynamic state variables
structural_model = TypicalSection()
coupled_model = couple_models(aerodynamic_model, structural_model)</code></pre><h2 id="Defining-State-Variables,-Inputs,-and-Parameters"><a class="docs-heading-anchor" href="#Defining-State-Variables,-Inputs,-and-Parameters">Defining State Variables, Inputs, and Parameters</a><a id="Defining-State-Variables,-Inputs,-and-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-State-Variables,-Inputs,-and-Parameters" title="Permalink"></a></h2><p>The governing equations for all models in this package may be expressed as the first order ordinary differential equation</p><p class="math-container">\[M(x,y,p,t)\dot{x} = f(x,y,p,t)\]</p><p>where <span>$M(x,y,p,t)$</span> is a function which defines the mass matrix corresponding to the differential equation, <span>$f(x, y, p, t)$</span> is a function which defines the mass matrix multiplied state rates, <span>$x$</span> is a vector of states, <span>$y$</span> is a vector of inputs/coupling variables, <span>$p$</span> is a vector of parameters, and <span>$t$</span> is the current time.</p><p>As described in the documentation for <a href="../aerodynamics/peters/#AerostructuralDynamics.Peters"><code>Peters</code></a>, the state, input, and parameter vectors for the aerodynamic model are</p><p class="math-container">\[x_\text{aero} = \begin{bmatrix} \lambda_1 \\ \lambda_2 \\ \vdots \\ \lambda_N \end{bmatrix} \quad
y_\text{aero} = \begin{bmatrix} u \\ v \\ \omega \end{bmatrix} \quad
p = \begin{bmatrix} a \\ b \\ a_0 \\ \alpha_0 \end{bmatrix}\]</p><p>where <span>$\lambda_1, \lambda_2, \dots, \lambda_N$</span> are the aerodynamic states, <span>$u$</span> is the chordwise freestream velocity, <span>$v$</span> is the normal freestream velocity, <span>$\omega$</span> is the angular freestream velocity, <span>$a$</span> is the normalized reference location relative to the semi-chord, <span>$b$</span> is the semi-chord, <span>$a_0$</span> is the section lift slope, and <span>$\alpha_0$</span> is the section zero lift angle of attack.  Positive freestream velocity components are defined as shown in the following figure.</p><p><img src="../airfoil.svg" alt/></p><p>As described in the documentation for <a href="../structures/section/#AerostructuralDynamics.TypicalSection"><code>TypicalSection</code></a>, the state, input, and parameter vectors for the typical section model are defined as</p><p class="math-container">\[x_\text{stru} = \begin{bmatrix} h \\ \theta \\ \dot{h} \\ \dot{\theta} \end{bmatrix} \quad y_\text{stru} = \begin{bmatrix} \mathcal{L} \\ \mathcal{M} \end{bmatrix} \quad p_\text{stru} = \begin{bmatrix} k_h \\ k_\theta \\ m \\ S_\theta \\ I_\theta \end{bmatrix}\]</p><p>where <span>$h$</span> is plunge, <span>$\theta$</span> is pitch, <span>$\mathcal{L}$</span> is the lift per unit span, <span>$\mathcal{M}$</span> is the moment per unit span about the reference point, <span>$k_h$</span> is the linear spring constant, and <span>$k_\theta$</span> is the torsional spring constant, <span>$m$</span> is the mass per unit span, <span>$S_\theta$</span> is the structural imbalance, and <span>$I_θ$</span> is the mass moment of inertia about the reference point.</p><p>The state variables and inputs of a coupled model correspond to the state variables and inputs of its component models concatenated.  The parameters of a coupled model correspond to the parameters of its component models concatenated, followed by additional parameters which are specific to the coupled model.  As noted in the coupled model&#39;s documentation, the additional parameters introduced by the coupled model is the freestream velocity <span>$U_\infty$</span> and air density <span>$\\rho$</span>.  The state, input, and parameter vectors for the coupled model are therefore</p><p class="math-container">\[x_\text{coupled} = \begin{bmatrix} \lambda_1 \\ \lambda_2 \\ \vdots \\ \lambda_N \\ h \\ \theta \\ \dot{h} \\ \dot{\theta} \end{bmatrix} \quad y_\text{coupled} = \begin{bmatrix} u \\ v \\ \omega \\ \mathcal{L} \\ \mathcal{M} \end{bmatrix} \quad p_\text{coupled} = \begin{bmatrix} a \\ b \\ a_0 \\ \alpha_0 \\ k_h \\ k_\theta \\ m \\ S_\theta \\ I_\theta \\ U_\infty \\ \rho \end{bmatrix}\]</p><pre><code class="language-julia hljs"># state variables
x_coupled = zeros(number_of_states(coupled_model))

# non-dimensional parameters
a = -1/5 # reference point normalized location
e = -1/10 # center of mass normalized location
μ = 20 # = m/(ρ*pi*b^2) (mass ratio)
r2 = 6/25 # = Iθ/(m*b^2) (radius of gyration about P)
σ = 2/5 # = ωh/ωθ (natural frequency ratio)
xθ = e - a
a0 = 2*pi # lift curve slope
α0 = 0 # zero lift angle
V = 1.0 # = U/(b*ωθ) (reduced velocity)

# chosen dimensional parameters
b = 1
ρ = 1
ωθ = 1

# derived dimensional parameters
m = μ*ρ*pi*b^2
Sθ = m*xθ*b
Iθ = r2*m*b^2
ωh = σ*ωθ
kh = m*ωh^2
kθ = Iθ*ωθ^2
U = V*b*ωθ

# parameter vector
p_aero = [a, b, a0, α0]
p_stru = [kh, kθ, m, Sθ, Iθ]
p_additional = [U, ρ]
p_coupled = vcat(p_aero, p_stru, p_additional)</code></pre><p>For coupled models, inputs are calculated as a function of the model states, model parameters, and current time using the <a href="../library/public/#AerostructuralDynamics.get_inputs"><code>get_inputs</code></a> function.  For uncoupled models, inputs are provided by the user.</p><pre><code class="language-julia hljs">t = 0 # time

y_coupled = get_inputs(coupled_model, x_coupled, p_coupled, t) # inputs</code></pre><h2 id="Performing-a-Stability-Analysis"><a class="docs-heading-anchor" href="#Performing-a-Stability-Analysis">Performing a Stability Analysis</a><a id="Performing-a-Stability-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Performing-a-Stability-Analysis" title="Permalink"></a></h2><p>The stability of a model for a given set of state variables, inputs, and parameters may be determined by calling the <a href="../library/public/#AerostructuralDynamics.get_eigen"><code>get_eigen</code></a> function, which returns eigenvalues, left eigenvectors, and right eigenvectors.  For nonlinear systems, the provided state variables must correspond to an equilibrium point for the stability analysis to be theoretically valid.  In our case, our aeroelastic system is linear, so all sets of state variables yield the same result.</p><pre><code class="language-julia hljs">λ, U, V = get_eigen(coupled_model, x_coupled, y_coupled, p_coupled, t)</code></pre><p>A positive real part corresponding to any eigenvalue returned from the <a href="../library/public/#AerostructuralDynamics.get_eigen"><code>get_eigen</code></a> function indicates that the system is unstable for the provided set of state variables, inputs, and parameters.</p><h2 id="Performing-a-Simulation"><a class="docs-heading-anchor" href="#Performing-a-Simulation">Performing a Simulation</a><a id="Performing-a-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Performing-a-Simulation" title="Permalink"></a></h2><p>To simulate the behavior of our model we first need to create an object of type <code>DifferentialEquations.ODEFunction</code> using <a href="../library/public/#AerostructuralDynamics.get_ode"><code>get_ode</code></a>.  Then the <a href="https://github.com/SciML/DifferentialEquations.jl">DifferentialEquations</a> package may be used to solve the ordinary differential equation corresponding to the model.</p><pre><code class="language-julia hljs">using DifferentialEquations

# non-zero plunge degree of freedom
u0 = [0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]

# simulate for 10 seconds
tspan = (0.0, 10.0)

# construct ODE function
f = get_ode(coupled_model)

# construct ODE problem
prob = DifferentialEquations.ODEProblem(f, u0, tspan, p_coupled)

# solve ODE
sol = DifferentialEquations.solve(prob)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">retcode: Success
Interpolation: specialized 3rd order &quot;free&quot; stiffness-aware interpolation
t: 35-element Vector{Float64}:
  0.0
  1.0e-6
  1.1e-5
  0.00011099999999999999
  0.0011109999999999998
  0.011011972631008473
  0.03208352179931346
  0.06083912523919266
  0.10056555626095366
  0.1517242531892151
  ⋮
  5.205954295121433
  5.775839195826205
  6.388165723253661
  7.007230251626449
  7.626294779999237
  8.263481870493154
  8.912904598085685
  9.562327325678217
 10.0
u: 35-element Vector{Vector{Float64}}:
 [0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]
 [-9.044822871380169e-8, -6.218317349311651e-8, -4.522414262191437e-8, -1.695909870729431e-8, 0.9999999999999202, 3.5403567435916175e-14, -1.5979884137062566e-7, 7.080713177719468e-8]
 [-9.949245714033e-7, -6.840126093194207e-7, -4.974657056777112e-7, -1.8655511166450709e-7, 0.9999999999903324, 4.283827915195206e-12, -1.7577870374209561e-6, 7.788774283037961e-7]
 [-1.003909353103351e-5, -6.902076983100932e-6, -5.019894917306624e-6, -1.8830177125425952e-6, 0.9999999990155602, 4.3620315970351274e-10, -1.773764722592358e-5, 7.85947825327791e-6]
 [-0.00010042131406607219, -6.905964839163567e-5, -5.024544267440964e-5, -1.8897773806573887e-5, 0.9999999013793727, 4.369512190308462e-8, -0.0001775340655027782, 7.86552567180552e-5]
 [-0.0009894372252042224, -0.0006821454936542493, -0.00049804714313309, -0.0001921660033367079, 0.9999903120132005, 4.288982509755885e-6, -0.0017594535457055673, 0.0007785832858738225]
 [-0.0028457263651582715, -0.0019716285266793286, -0.001449554962866215, -0.0005880297601685218, 0.9999177785126844, 3.633713784072465e-5, -0.005124699635165989, 0.0022617611272753024]
 [-0.0052993939578688054, -0.003693286967725643, -0.0027383497303757804, -0.001180068209613708, 0.9997044268472052, 0.0001303018662159304, -0.009713516183509286, 0.004270591662249182]
 [-0.008536298915326103, -0.005988723229272782, -0.004484452797894766, -0.0020758656399546146, 0.9991927477159361, 0.00035457666999105314, -0.016044910271934793, 0.007013868645289046]
 [-0.012442730824393382, -0.008783652674815184, -0.006644239901162873, -0.003320374485493297, 0.9981636944374042, 0.0008025006739095601, -0.02418147763876031, 0.010485038182065084]
 ⋮
 [-0.09248487785621787, -0.04688301933239061, -0.029528911380585048, -0.023558089940106445, -0.3230268621213677, -0.11531054230535, -0.27496190438442136, -0.08947532996926635]
 [-0.05060038357162489, -0.019033962062358908, -0.009351997374536283, -0.008706299437172998, -0.4660282230354371, -0.15628139200264024, -0.2253429105265707, -0.05165712830656878]
 [0.006677160795649896, 0.017073989777514648, 0.01602971981698161, 0.010367921067074548, -0.585426757377924, -0.1722743994281744, -0.16346310559550786, 0.00017285893676160228]
 [0.06721227944491634, 0.05331376618154885, 0.040712801045488065, 0.029274344664438148, -0.6657814768898821, -0.15639523997377147, -0.095528320484616, 0.04931576961550388]
 [0.11888423832653802, 0.08221795661220592, 0.059555864883341976, 0.04405096844842535, -0.7032904769160245, -0.1147778519373052, -0.025584548238087375, 0.08143224466903795]
 [0.1531800371316459, 0.09890589009378076, 0.06938533499186259, 0.052159334004552416, -0.69689824196389, -0.0591298062052872, 0.04515886161995207, 0.08866774973732365]
 [0.1637917678449901, 0.10037231922338374, 0.06854348967723019, 0.0521436571286307, -0.6453635466686123, -0.006376697707995122, 0.11243256251911218, 0.07000855208174876]
 [0.15186623198615912, 0.0884580450007346, 0.05880053250455814, 0.04516064727819799, -0.5527285414165567, 0.028188095645181238, 0.17109901733940877, 0.034857904261571225]
 [0.13481024571726494, 0.07558771925342479, 0.0492585901233418, 0.03803024146600942, -0.47044462068813986, 0.03778289557587591, 0.20387581981503478, 0.00925696505013477]</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Wednesday 28 July 2021 21:12">Wednesday 28 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
